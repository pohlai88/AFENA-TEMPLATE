<!-- AUTOGEN:START -->
<!-- Generated by afena readme gen — DO NOT EDIT inside this block -->
<!-- Signature: sha256:59b0b870319f776b6a6f71765d6c6b7c2b423d46f3d660e906d5268cc0946990 -->
# afena-vitest-config

## Usage

### Available Configurations

| Export | Path |
|---|---|
| `.` | `./base.ts` |
| `./base` | `./base.ts` |
| `./presets/integration` | `./presets/integration.ts` |
| `./presets/unit` | `./presets/unit.ts` |
| `./setup/mock-database` | `./setup/mock-database.ts` |

## Installation

```bash
pnpm -w add afena-vitest-config
```

## Dependencies

| Package | Version |
|---|---|
| `vitest` | `catalog:` |

<!-- AUTOGEN:END -->

# afena-vitest-config

Shared Vitest configuration for the Afena monorepo.

## Presets

### Unit (`afena-vitest-config/presets/unit`)

Fast unit tests with `afena-database` mocked automatically.

- `pool: 'threads'` — Worker threads, fastest for pure Node tests
- `isolate: false` — skip VM context reset per file
- `testTimeout: 5s`
- `setupFiles` — auto-mocks `afena-database` (no DATABASE_URL needed)

### Integration (`afena-vitest-config/presets/integration`)

DB integration tests with full isolation.

- `pool: 'forks'` — child processes, safe for native PG driver
- `isolate: true` — each test file gets clean state
- `testTimeout: 30s`
- Requires `DATABASE_URL` environment variable

## Usage

```ts
// packages/my-package/vitest.config.ts
import { defineProject, mergeConfig } from 'vitest/config';
import { unitPreset } from 'afena-vitest-config/presets/unit';

export default mergeConfig(
  unitPreset,
  defineProject({
    // package-specific overrides here
  }),
);
```

## Shared Setup Files

### `afena-vitest-config/setup/mock-database`

Mocks `afena-database` with a chainable Proxy so any `db.method().chain()` call
works without a real database connection. Included automatically in the unit preset.
