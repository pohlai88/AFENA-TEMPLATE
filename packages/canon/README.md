<!-- AUTOGEN:START -->
<!-- Generated by afena readme gen â€” DO NOT EDIT inside this block -->
<!-- Signature: sha256:e5e7dc0e89fe13ec02df7781e179a76767a12b9a7e4aa096d98d444b181e0bfd -->
# afena-canon

## Package Overview

ğŸ“ 7 Subdirectories

### What's Inside

- Configuration
- Main exports
- Schemas
- Type definitions

### Directory Structure

```
src/
â”œâ”€â”€ adapters/
â”œâ”€â”€ contracts/
â”œâ”€â”€ enums/
â”œâ”€â”€ schemas/
â”œâ”€â”€ serialization/
â”œâ”€â”€ types/
â””â”€â”€ validators/
```

### Entry Points

- `src/adapters/erpnext/adoption/index.ts`
- `src/adapters/erpnext/index.ts`
- `src/contracts/index.ts`
- `src/enums/index.ts`
- `src/index.ts`
- `src/serialization/index.ts`

## Usage

```ts
import { /* ... */ } from 'afena-canon';
```

## API

See source files for available exports.

## Installation

```bash
pnpm -w add afena-canon
```

## Exports

| Subpath | Conditions |
|---|---|
| `.` | import: `./dist/index.mjs`, require: `./dist/index.js`, types: `./dist/index.d.ts` |

## Scripts

| Script | Command |
|---|---|
| `build` | `tsup` |
| `dev` | `tsup --watch` |
| `lint` | `eslint . --ext .js,.jsx,.ts,.tsx --cache --concurrency=auto` |
| `lint:ci` | `eslint . --ext .js,.jsx,.ts,.tsx --rule 'import/no-cycle: error'` |
| `lint:fix` | `eslint . --ext .js,.jsx,.ts,.tsx --cache --fix` |
| `type-check` | `tsc --noEmit` |

## Architecture

```
src/
â”œâ”€â”€ types/      # Type definitions
â””â”€â”€ index.ts    # Public API
```

## Dependencies

| Package | Version |
|---|---|
| `zod` | `catalog:` |

## Related Packages

- `afena-eslint-config`
- `afena-typescript-config`

## Contributing

### Development Workflow

1. Make changes to source files
2. Run `pnpm lint:fix` to fix linting issues
3. Run `pnpm type-check` to verify types
4. Run `pnpm test` to verify tests pass
5. Run `pnpm build` to verify build succeeds

### Code Quality

- All code must pass ESLint checks
- All code must pass TypeScript type checking
- All tests must pass
- Maintain or improve test coverage

<!-- AUTOGEN:END -->

# afena-canon

Shared type contracts, Zod schemas, and error taxonomy for the Afena Interaction Kernel (AIK).

## Public API

### Types

- `EntityType`, `EntityRef`, `BaseEntity` â€” entity identity
- `ActorRef` â€” mutation actor (userId, orgId, roles)
- `ActionVerb`, `ActionType`, `ActionFamily` â€” namespaced action taxonomy
- `MutationSpec`, `JsonValue` â€” mutation input shape
- `Receipt`, `ReceiptStatus` â€” deterministic mutation response
- `ApiResponse` â€” standard API envelope
- `ErrorCode`, `KernelError` â€” error taxonomy (7 codes)
- `AuditLogEntry` â€” audit trail record

### Zod Schemas

Every type above has a matching Zod schema for runtime validation:
`entityRefSchema`, `mutationSpecSchema`, `receiptSchema`, `errorCodeSchema`, etc.

### Helpers

- `extractVerb(actionType)` â€” get verb from `entity.verb` string
- `extractEntityNamespace(actionType)` â€” get entity name
- `getActionFamily(actionType)` â€” map action to CRUD-SAP family

## Usage

```typescript
import { mutationSpecSchema, type MutationSpec } from 'afena-canon';

const spec = mutationSpecSchema.parse(input);
```

## Invariants

- Action types follow `{entity}.{verb}` pattern (K-06, K-15)
- Error codes are a closed enum of 7 values
- All schemas use Zod v4
