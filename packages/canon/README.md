<!-- AUTOGEN:START -->
<!-- Generated by afena readme gen — DO NOT EDIT inside this block -->
<!-- Signature: sha256:98ce54a86b44d0eaaba547a74d1878a0a6f2d54f16784421ccdda35f0f6455ef -->
# afena-canon

## Usage

```ts
import { /* ... */ } from 'afena-canon';
```

## API

See source files for available exports.

## Installation

```bash
pnpm -w add afena-canon
```

## Exports

| Subpath | Conditions |
|---|---|
| `.` | import: `./dist/index.mjs`, require: `./dist/index.js`, types: `./dist/index.d.ts` |

## Scripts

| Script | Command |
|---|---|
| `build` | `tsup` |
| `dev` | `tsup --watch` |
| `lint` | `eslint . --ext .js,.jsx,.ts,.tsx --cache --concurrency=auto` |
| `lint:ci` | `eslint . --ext .js,.jsx,.ts,.tsx --rule 'import/no-cycle: error'` |
| `lint:fix` | `eslint . --ext .js,.jsx,.ts,.tsx --cache --fix` |
| `type-check` | `tsc --noEmit` |

## Dependencies

| Package | Version |
|---|---|
| `zod` | `catalog:` |

## Related Packages

- `afena-eslint-config`
- `afena-typescript-config`

<!-- AUTOGEN:END -->

# afena-canon

Shared type contracts, Zod schemas, and error taxonomy for the Afena Interaction Kernel (AIK).

## Public API

### Types

- `EntityType`, `EntityRef`, `BaseEntity` — entity identity
- `ActorRef` — mutation actor (userId, orgId, roles)
- `ActionVerb`, `ActionType`, `ActionFamily` — namespaced action taxonomy
- `MutationSpec`, `JsonValue` — mutation input shape
- `Receipt`, `ReceiptStatus` — deterministic mutation response
- `ApiResponse` — standard API envelope
- `ErrorCode`, `KernelError` — error taxonomy (7 codes)
- `AuditLogEntry` — audit trail record

### Zod Schemas

Every type above has a matching Zod schema for runtime validation:
`entityRefSchema`, `mutationSpecSchema`, `receiptSchema`, `errorCodeSchema`, etc.

### Helpers

- `extractVerb(actionType)` — get verb from `entity.verb` string
- `extractEntityNamespace(actionType)` — get entity name
- `getActionFamily(actionType)` — map action to CRUD-SAP family

## Usage

```typescript
import { mutationSpecSchema, type MutationSpec } from 'afena-canon';

const spec = mutationSpecSchema.parse(input);
```

## Invariants

- Action types follow `{entity}.{verb}` pattern (K-06, K-15)
- Error codes are a closed enum of 7 values
- All schemas use Zod v4
