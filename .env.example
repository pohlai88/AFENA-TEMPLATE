# ============================================================================
# afenda Monorepo — Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env files with real secrets to version control
# ============================================================================

# ── Application ──────────────────────────────────────────────────────────────
NODE_ENV=development
LOG_LEVEL=debug
PORT=3000
BASE_URL=http://localhost:3000

# ── Dev Credentials ──────────────────────────────────────────────────────────
# Enable simple auth bypass for local development
ENABLE_DEV_CREDENTIALS=true
DEV_AUTH_USERNAME=admin
DEV_AUTH_PASSWORD=admin

# ── Database (Neon PostgreSQL) ───────────────────────────────────────────────
# Runtime: pooled connection (serverless-safe, high concurrency)
DATABASE_URL=postgresql://user:password@host-pooler.region.aws.neon.tech/dbname?sslmode=require&channel_binding=require
DATABASE_POOL_MAX=20
DATABASE_STATEMENT_TIMEOUT=30000

# Migrations: direct TCP (no pooler) for DDL and advisory locks
DATABASE_URL_MIGRATIONS=postgresql://user:password@host.region.aws.neon.tech/dbname?sslmode=require

# Search worker: must have BYPASSRLS for multi-tenant operations
SEARCH_WORKER_DATABASE_URL=postgresql://user:password@host-pooler.region.aws.neon.tech/dbname?sslmode=require&channel_binding=require

# Environment-specific URLs (optional)
# DEV_DATABASE_URL=
# TEST_DATABASE_URL=

# Neon project configuration
NEON_PROJECT_ID=your-neon-project-id
NEON_API_KEY=your-neon-api-key
NEON_PASSWORDLESS_AUTH=-h pg.neon.tech

# ── Authentication (Neon Auth) ───────────────────────────────────────────────
NEON_AUTH_BASE_URL=https://your-project.neonauth.region.aws.neon.tech/dbname/auth
NEON_AUTH_COOKIE_SECRET=your-32-character-secret-minimum-length
NEXT_PUBLIC_NEON_AUTH_URL=https://your-project.neonauth.region.aws.neon.tech/dbname/auth
JWKS_URL=https://your-project.neonauth.region.aws.neon.tech/dbname/auth/.well-known/jwks.json
NEON_JWT_SECRET=your-jwt-secret

# ── OAuth Providers ──────────────────────────────────────────────────────────
GITHUB_ID=your-github-oauth-client-id
GITHUB_SECRET=your-github-oauth-client-secret

# ── Neon Data API ────────────────────────────────────────────────────────────
NEON_DATA_API_URL=https://your-project.apirest.region.aws.neon.tech/dbname/rest/v1

# ── Observability (OpenTelemetry) ────────────────────────────────────────────
# OTLP endpoint for traces and metrics (e.g., Jaeger, Honeycomb, Grafana Cloud)
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_SERVICE_NAME=afenda-web
OTEL_SERVICE_VERSION=0.1.0

# Optional: specific endpoints for traces/metrics/logs
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
# OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://localhost:4318/v1/metrics

# ── Error Tracking (Sentry) ──────────────────────────────────────────────────
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ORG=your-org
# SENTRY_PROJECT=your-project
# SENTRY_AUTH_TOKEN=your-auth-token
# SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=1.0
# SENTRY_PROFILES_SAMPLE_RATE=1.0

# ── Feature Flags ────────────────────────────────────────────────────────────
NEXT_PUBLIC_FEATURE_SEARCH=true
# NEXT_PUBLIC_FEATURE_AI_ASSIST=false
# NEXT_PUBLIC_FEATURE_ANALYTICS=false

# ── Build & Performance ──────────────────────────────────────────────────────
# For memory-constrained type-check/lint runs (large monorepo, CI):
# NODE_OPTIONS=--max-semi-space-size=256 pnpm type-check
# NODE_OPTIONS=--max-semi-space-size=256 pnpm lint:ci
#
# Turbo cache configuration (optional)
# TURBO_TOKEN=your-vercel-token
# TURBO_TEAM=your-team-slug
# TURBO_REMOTE_ONLY=false

# Next.js configuration
# NEXT_TELEMETRY_DISABLED=1
# ANALYZE=true

# ── Testing ──────────────────────────────────────────────────────────────────
# Override database for tests (recommended: use Neon branch)
TEST_DATABASE_URL=postgresql://user:password@test-branch-pooler.region.aws.neon.tech/dbname?sslmode=require

# E2E test configuration
# PLAYWRIGHT_BASE_URL=http://localhost:3000
# PLAYWRIGHT_HEADLESS=true

# ── Development Tools ────────────────────────────────────────────────────────
# Enable verbose logging for afenda-cli
# afenda_VERBOSE=1

# ── CI/CD ────────────────────────────────────────────────────────────────────
# CI environment indicator (automatically set in GitHub Actions)
# CI=true
# GITHUB_ACTIONS=true
