# Afena Nexus — Development Notes

> Codebase screening results for placeholders, TODOs, stubs, and incomplete implementations.

---

## Identified Development Items (as of 2026-02-12)

### 1. **Placeholder Tests** (2 items)

- `packages/database/src/__tests__/jwt-org-claim.test.ts`:
  - Line 61: `expect(true).toBe(true); // placeholder — implement when org creation flow exists`
  - Line 69: `expect(true).toBe(true); // placeholder — implement when Data API integration exists`

### 2. **Placeholder Policy Implementation** (1 item)

- `packages/crud/src/policy.ts`:
  - Comment: "Placeholder policy enforcement. Phase 1: always passes. Phase 2+ will add real RBAC checks."
  - Function `enforcePolicy()` is empty - only has a comment stating "Phase 1: no policy checks beyond RLS"

### 3. **Deprecated Feature Warning** (1 item)

- `tools/afena-cli/src/index.ts`:
  - Line 284: `DEPRECATED: --fix-readmes will be removed in a future release. Use: afena readme gen`

### 4. **Future Work Items** (3 items)

- `packages/workflow/src/registry.ts`:
  - Comment: "Future: rules can be loaded from DB for per-org customization"
- `packages/database/scripts/create-auth-org-helpers.sql`:
  - Comment: "Future-proof: tries camelCase then snake_case claim key"
- `packages/canon/src/types/action.ts`:
  - Comment: "Phase 1 action types — contacts only"

### 5. **Incomplete Implementation Comments** (2 items)

- `.agent/reference/next.js/authentication.md`:
  - Two instances of "// TODO:" followed by "4. Create user session" and "5. Redirect user"

### 6. **Minor Implementation Gaps**

- `apps/web/app/actions/contacts.ts`:
  - Line 22: `orgId: '', // Will be set by RLS via auth.org_id()` - This is intentional for RLS

---

## Key Areas Needing Attention:

1. **Policy Engine** - The RBAC policy enforcement is just a stub
2. **Test Implementation** - Two JWT/org claim tests need real implementation
3. **Workflow Rules** - Database-driven rules per organization (future feature)
4. **CLI Deprecation** - Remove deprecated `--fix-readmes` flag in a future release

---

_Updated: 2026-02-12_
