{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Quality Notifications Configuration",
    "description": "Configuration for team notifications about quality metrics",
    "type": "object",
    "properties": {
        "enabled": {
            "type": "boolean",
            "description": "Enable or disable all notifications",
            "default": true
        },
        "mode": {
            "type": "string",
            "enum": [
                "realtime",
                "digest"
            ],
            "description": "Notification mode: realtime alerts or daily digest",
            "default": "realtime"
        },
        "slack": {
            "type": "object",
            "description": "Slack notification configuration",
            "properties": {
                "webhookUrl": {
                    "type": "string",
                    "description": "Slack incoming webhook URL",
                    "pattern": "^https://hooks\\.slack\\.com/services/"
                },
                "channel": {
                    "type": "string",
                    "description": "Slack channel name (optional, webhook default used if not specified)",
                    "pattern": "^#"
                },
                "username": {
                    "type": "string",
                    "description": "Bot username to display",
                    "default": "AFENDA Quality Bot"
                },
                "iconEmoji": {
                    "type": "string",
                    "description": "Bot icon emoji",
                    "default": ":chart_with_upwards_trend:"
                },
                "severity": {
                    "type": "array",
                    "description": "Alert severity levels to send",
                    "items": {
                        "type": "string",
                        "enum": [
                            "critical",
                            "warning",
                            "info"
                        ]
                    },
                    "default": [
                        "critical",
                        "warning",
                        "info"
                    ]
                }
            },
            "required": [
                "webhookUrl"
            ]
        },
        "discord": {
            "type": "object",
            "description": "Discord notification configuration",
            "properties": {
                "webhookUrl": {
                    "type": "string",
                    "description": "Discord webhook URL",
                    "pattern": "^https://discord\\.com/api/webhooks/"
                },
                "username": {
                    "type": "string",
                    "description": "Bot username to display",
                    "default": "AFENDA Quality Bot"
                },
                "avatarUrl": {
                    "type": "string",
                    "description": "Bot avatar URL"
                },
                "severity": {
                    "type": "array",
                    "description": "Alert severity levels to send",
                    "items": {
                        "type": "string",
                        "enum": [
                            "critical",
                            "warning",
                            "info"
                        ]
                    },
                    "default": [
                        "critical",
                        "warning"
                    ]
                }
            },
            "required": [
                "webhookUrl"
            ]
        },
        "teams": {
            "type": "object",
            "description": "Microsoft Teams notification configuration",
            "properties": {
                "webhookUrl": {
                    "type": "string",
                    "description": "Teams incoming webhook URL"
                },
                "severity": {
                    "type": "array",
                    "description": "Alert severity levels to send",
                    "items": {
                        "type": "string",
                        "enum": [
                            "critical",
                            "warning",
                            "info"
                        ]
                    },
                    "default": [
                        "critical",
                        "warning"
                    ]
                }
            },
            "required": [
                "webhookUrl"
            ]
        },
        "digest": {
            "type": "object",
            "description": "Daily digest configuration (when mode = 'digest')",
            "properties": {
                "time": {
                    "type": "string",
                    "description": "Time to send daily digest (HH:MM format)",
                    "pattern": "^([0-1][0-9]|2[0-3]):[0-5][0-9]$",
                    "default": "09:00"
                },
                "timezone": {
                    "type": "string",
                    "description": "Timezone for digest schedule",
                    "default": "UTC"
                },
                "includeSeverity": {
                    "type": "array",
                    "description": "Severity levels to include in digest",
                    "items": {
                        "type": "string",
                        "enum": [
                            "critical",
                            "warning",
                            "info"
                        ]
                    },
                    "default": [
                        "critical",
                        "warning"
                    ]
                }
            }
        }
    },
    "required": [],
    "additionalProperties": false,
    "examples": [
        {
            "enabled": true,
            "mode": "realtime",
            "slack": {
                "webhookUrl": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
                "channel": "#quality-metrics",
                "severity": [
                    "critical",
                    "warning"
                ]
            },
            "discord": {
                "webhookUrl": "https://discord.com/api/webhooks/YOUR WEBHOOK/URL",
                "severity": [
                    "critical"
                ]
            }
        },
        {
            "enabled": true,
            "mode": "digest",
            "slack": {
                "webhookUrl": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
                "severity": [
                    "critical",
                    "warning",
                    "info"
                ]
            },
            "digest": {
                "time": "09:00",
                "timezone": "America/New_York",
                "includeSeverity": [
                    "critical",
                    "warning"
                ]
            }
        }
    ]
}