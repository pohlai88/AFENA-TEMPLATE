# Tools Directory

> **Auto-generated documentation** - Run `pnpm afena docs` to regenerate

Unified development and maintenance utilities for the Afena monorepo.

## Quick Start

```bash
# Run all maintenance tasks
pnpm bundle

# Preview changes (dry-run)
pnpm bundle:dry

# Generate READMEs
pnpm afena readme gen

# Run housekeeping checks
pnpm afena housekeeping
```

## Structure

```
tools/
â””â”€â”€ afena-cli/                    # Unified CLI tool
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ cli.ts                 # Main CLI entry point
    â”‚   â”œâ”€â”€ types.ts               # All Zod schemas & types
    â”‚   â”‚
    â”‚   â”œâ”€â”€ core/                  # Core utilities (shared)
    â”‚   â”‚   â”œâ”€â”€ exec.ts            # Command execution
    â”‚   â”‚   â”œâ”€â”€ logger.ts          # Logging
    â”‚   â”‚   â”œâ”€â”€ paths.ts           # Path utilities
    â”‚   â”‚   â”œâ”€â”€ runner.ts          # Registry command runner
    â”‚   â”‚   â”œâ”€â”€ reporter.ts        # Report generation
    â”‚   â”‚   â”œâ”€â”€ report-builder.ts  # Auto report builder
    â”‚   â”‚   â””â”€â”€ report-config.ts   # Report constants
    â”‚   â”‚
    â”‚   â”œâ”€â”€ readme/                # README generation
    â”‚   â”‚   â”œâ”€â”€ readme-engine.ts   # Main engine
    â”‚   â”‚   â”œâ”€â”€ analyzer.ts        # Package analysis
    â”‚   â”‚   â”œâ”€â”€ templates.ts       # README templates
    â”‚   â”‚   â””â”€â”€ renderer.ts        # Markdown rendering
    â”‚   â”‚
    â”‚   â”œâ”€â”€ capability/            # Capability Truth Ledger
    â”‚   â”‚   â”œâ”€â”€ collectors/        # Data collectors
    â”‚   â”‚   â”œâ”€â”€ checks/            # VIS-00 through VIS-04
    â”‚   â”‚   â”œâ”€â”€ emitters/          # Ledger generation
    â”‚   â”‚   â””â”€â”€ adapter/           # ERP adapter pipeline
    â”‚   â”‚
    â”‚   â”œâ”€â”€ checks/                # All invariant checks
    â”‚   â”‚   â””â”€â”€ invariants.ts      # E1-E7, H00-H02
    â”‚   â”‚
    â”‚   â”œâ”€â”€ bundle/                # Bundle all tasks
    â”‚   â”‚   â””â”€â”€ command.ts         # Run all maintenance
    â”‚   â”‚
    â”‚   â”œâ”€â”€ discovery/             # Package/script discovery
    â”‚   â”‚   â”œâ”€â”€ scan.ts            # Scan workspace
    â”‚   â”‚   â””â”€â”€ register.ts        # Register to registry
    â”‚   â”‚
    â”‚   â””â”€â”€ docs/                  # Documentation generation
    â”‚       â””â”€â”€ tools-docs.ts      # This file
    â”‚
    â”œâ”€â”€ bin/afena                  # Binary
    â””â”€â”€ package.json
```

## Commands

### Bundle

Run all maintenance tasks in sequence:

```bash
pnpm bundle              # Run all tasks
pnpm bundle:dry          # Preview changes
pnpm afena bundle --skip-readme
pnpm afena bundle --skip-meta
pnpm afena bundle --skip-housekeeping
```

**Tasks:**
1. ğŸ“ README Generation - Generate and update package READMEs
2. ğŸ” Metadata Checks - Validate capability metadata
3. ğŸ§¹ Housekeeping - Run invariant checks (E1-E7, H00-H02)

### README Generation

```bash
pnpm afena readme gen           # Generate all READMEs
pnpm afena readme gen --dry-run # Preview changes
pnpm afena readme validate      # Validate existing READMEs
```

### Housekeeping

```bash
pnpm afena housekeeping         # Run all checks
pnpm afena housekeeping --json  # JSON output
```

### Metadata

```bash
pnpm afena meta check           # Validate metadata
pnpm afena meta scan            # Scan for capabilities
```

## Auto-Generated Reports

All commands generate standardized reports with:

- â±ï¸  **Timestamp & Duration** - When and how long
- ğŸ“Š **Metrics** - Total/Success/Warnings/Errors
- âœ“ **Task Status** - Color-coded results
- ğŸ’¡ **Recommendations** - Smart next steps
- ğŸ“„ **Markdown Export** - Optional file output

## Key Features

### Package Discovery
- Auto-detects package structure
- Identifies key exports (types, utils, components, etc.)
- Shows directory structure and entry points
- Flags empty packages

### README Generation
- Auto-generates package overviews
- Creates architecture documentation
- Maintains consistent format
- Preserves custom content outside autogen blocks

### Invariant Checks
- E1-E7: Code quality checks
- H00-H02: Handler registry validation
- Automated enforcement
- Clear error reporting

---

*Auto-generated by `pnpm afena docs` - Do not edit manually*
